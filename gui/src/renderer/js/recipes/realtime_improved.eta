{"vi_templatejg59migx":"{\"nodes\":[{\"x\":58,\"y\":63,\"fixed\":true,\"text\":\"a\",\"px\":58,\"py\":63,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"1\"}],\"usercode\":\"\\na:\\n    emit(3,60240)#90000000\"}","vi_templatejfc9koma":"{\"nodes\":[{\"x\":82,\"y\":81,\"fixed\":true,\"text\":\"a\",\"px\":82,\"py\":81,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"0\"}],\"usercode\":\"\\na:\\n\\n    emit(2,0)#90000000\"}","vi_templatejg52ksbp":"{\"nodes\":[{\"x\":374,\"y\":109,\"fixed\":true,\"text\":\"start\",\"px\":374,\"py\":109},{\"x\":101,\"y\":103,\"fixed\":true,\"text\":\"stop\",\"px\":101,\"py\":103,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":1,\"text\":\"3\"},{\"source\":1,\"target\":0,\"text\":\"2\"},{\"source\":0,\"target\":0,\"text\":\"2\"},{\"source\":1,\"target\":1,\"text\":\"3\"}],\"usercode\":\"HISTOGRAM(h3,(`bins`,`binsize`))#18744000\\nINTEGER(i1,0)\\nCLOCK(c3,100,1)\\nstart:\\n    {i1+=AbsTime_ps}\\n    c3.start()\\n\\nstop:\\n    c3.stop()\\n    h3.record(c3)\\n\"}","vi_templatejfb2qshf":"{\"nodes\":[{\"x\":346,\"y\":111,\"fixed\":true,\"text\":\"start\",\"px\":346,\"py\":111},{\"x\":75,\"y\":66,\"fixed\":true,\"text\":\"stop\",\"px\":75,\"py\":66,\"initial\":true}],\"edges\":[{\"source\":0,\"target\":1,\"text\":\"2\"},{\"source\":1,\"target\":0,\"text\":\"3\"},{\"source\":0,\"target\":0,\"text\":\"3\"},{\"source\":1,\"target\":1,\"text\":\"2\"}],\"usercode\":\"HISTOGRAM(h4,(`bins`,`binsize`))#18744000\\nCLOCK(c4,100,1)\\nstart:\\n    c4.start()\\nstop:\\n    c4.stop()\\n    h4.record(c4)\"}","dpp_template_code":"#------IMPORTS-----\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nfrom os import path\r\nfrom matplotlib.widgets import Button\r\n\r\n#-----PLOTTING----\r\ndata_last=None\r\ndata_now=None\r\ndef clear_graph(test):\r\n    global data_last\r\n    global data_now\r\n    global np\r\n    data_last=np.copy(data_now)\r\n    print(\"!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\")\r\nplt.ion()\r\nfig = plt.figure()\r\nax = fig.add_subplot(111)\r\nline1, = ax.plot([], [], 'r-') # Returns a tuple of line objects, thus the comma\r\nax.set_ylabel('events')\r\nax.set_xlabel('time (ps)')\r\nax.set_title(\"Realtime\")\r\naxnext = plt.axes([0.81, 0.05, 0.1, 0.075])\r\nbnext = Button(axnext, 'Clear')\r\nbnext.on_clicked(clear_graph)\r\n\r\n#------ETA PROCESSING-----\r\ny_max = int(y_max)\r\nrecords_per_cut = int(records_per_cut)\r\nbinsize=int(binsize)\r\ncut=None\r\nctx1=None\r\neta.send(\"ETA is running in realtime...\", \"running\")\r\nwhile True:\r\n    try:\r\n        cut=eta.incremental_cut(file,cut=cut, rec_per_cut=records_per_cut,verbose=False)\r\n    except Exception as e:\r\n        eta.send(str(e),\"err\")\r\n        break\r\n    \r\n    if not(eta.wait_till_presnese(cut,timeout=1.0)):\r\n        break\r\n    result,ctx1 = eta.run(cut, group='main',\r\n       ctxs= ctx1,sum_results=True,iterate_ctxs=True,verbose=False)\r\n    \r\n    t1=result[\"h3\"]\r\n    t2=result[\"h4\"] \r\n\r\n    data_now=np.copy(np.concatenate((np.flip(t2, 0), t1), axis=0))\r\n    if data_last is not None:\r\n        data_draw=data_now-data_last\r\n    else:\r\n        data_draw=data_now\r\n    try:\r\n        ax.set_xlim(-t2.size*binsize,t1.size*binsize)\r\n        ax.set_ylim(0,y_max)\r\n        line1.set_xdata(np.arange(-t2.size,t1.size)*binsize)\r\n        line1.set_ydata(data_draw)\r\n        fig.canvas.draw()\r\n        fig.canvas.flush_events()\r\n    except Exception as e:\r\n        #eta.send(str(e),\"err\")\r\n        break\r\neta.send(\"ETA realtime is stopped.\", \"stopped\")\r\nplt.close()","eta_index_table":"[{\"id\":\"var_templatejgmgopco\",\"name\":\"file\",\"group\":\"main\",\"info\":\"\",\"config\":\"C:/Users/zuzeng/source/repos/ETA/g2_XX_slit25_1pi_15k-10k_3h_000_4.ptu\"},{\"id\":\"var_templatejgmgor6i\",\"name\":\"binsize\",\"group\":\"main\",\"info\":\"16\",\"config\":\"16\"},{\"id\":\"var_templatejgoxm1kc\",\"name\":\"expname\",\"group\":\"main\",\"info\":\"live-correlation\",\"config\":\"live-correlation\"},{\"id\":\"var_templatejgs1gofi\",\"name\":\"folder\",\"group\":\"main\",\"info\":\"\",\"config\":\"\"},{\"id\":\"var_templatejh7ylntd\",\"name\":\"bins\",\"group\":\"main\",\"info\":\"10000\",\"config\":\"10000\"},{\"id\":\"var_templatejkb488i2\",\"name\":\"y_max\",\"group\":\"main\",\"info\":\"4000\",\"config\":\"4000\"},{\"id\":\"var_templatejkb4eu0q\",\"name\":\"records_per_cut\",\"group\":\"main\",\"info\":\"1000000\",\"config\":\"100000\"},{\"id\":\"dpp_template_code\",\"name\":\"realtime\",\"group\":\"main\",\"info\":\"\",\"config\":\"\"},{\"id\":\"ri_templatejezi0bbr\",\"name\":\"TimeTagger\",\"group\":\"main\",\"info\":\"游닋 [0, 1]\",\"config\":\"[2,0]\"},{\"id\":\"vi_templatejfc9koma\",\"name\":\"DL0-2\",\"group\":\"main\",\"info\":\"游닌 [0], 游닋 [2], 游늵 ??? \",\"config\":\"\"},{\"id\":\"vi_templatejg59migx\",\"name\":\"DL1-3\",\"group\":\"main\",\"info\":\"游닌 [1], 游닋 [3], 游늵 ??? \",\"config\":\"\"},{\"id\":\"vi_templatejg52ksbp\",\"name\":\"Correlationbwd\",\"group\":\"main\",\"info\":\"游닌 [3, 2], 游닋 [], 游늵 ??? \",\"config\":\"\"},{\"id\":\"vi_templatejfb2qshf\",\"name\":\"Correlationfwd\",\"group\":\"main\",\"info\":\"游닌 [2, 3], 游닋 [], 游늵 ??? \",\"config\":\"\"}]"}